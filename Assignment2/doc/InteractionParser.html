<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: InteractionParser
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "InteractionParser";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (I)</a> &raquo;
    
    
    <span class="title">InteractionParser</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: InteractionParser
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">InteractionParser</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>InteractionPArser.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h2 id="label-InteractionParser">InteractionParser</h2>

<p>This is a Parser for a set of Interactions between proteins information gathered in the IntAct Database.</p>

<h2 id="label-Summary">Summary</h2>

<p>This object access the data Using the PSIQUIC IntAct REST API. It reads all the interactions of a query gene using the AGI Locus ID and it filters the interaction by taxonomy of Arabidopsis thaliana and by the quality of the interaction with a threshold of 0.4.</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#locus_id-instance_method" title="#locus_id (instance method)">#<strong>locus_id</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get/Set the Gene ID AGI Locus Code used as query.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_interaction-instance_method" title="#create_interaction (instance method)">#<strong>create_interaction</strong>(line)  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Parse and filter an interaction (a line) defined by the tab25 format of the PSIQUIC IntAct REST API database.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_interactions-instance_method" title="#create_interactions (instance method)">#<strong>create_interactions</strong>  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Read the information of the PSIQUIC IntAct REST API with the Locus ID as query in tab25 format and create the list of interactions.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(params = {})  &#x21d2; InteractionParser </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new instance of InteractionParser object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#interactions-instance_method" title="#interactions (instance method)">#<strong>interactions</strong>  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get method for the interactions array.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(params = {})  &#x21d2; <tt><span class='object_link'><a href="" title="InteractionParser (class)">InteractionParser</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new instance of InteractionParser object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>locus_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The ID: AGI Locus Codes, normalized to upcase</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>interactions</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array of all the pair of interactions of the query Gene.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionPArser.rb', line 25</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
	<span class='ivar'>@locus_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:locus_id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='ivar'>@interactions</span> <span class='op'>=</span> <span class='id identifier rubyid_create_interactions'>create_interactions</span> <span class='comment'># Array of all the interaction objects
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="locus_id=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="locus_id-instance_method">
  
    #<strong>locus_id</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get/Set the Gene ID AGI Locus Code used as query</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The Gene ID AGI Locus Code used as query</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionPArser.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_locus_id'>locus_id</span>
  <span class='ivar'>@locus_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create_interaction-instance_method">
  
    #<strong>create_interaction</strong>(line)  &#x21d2; <tt>Array&lt;String&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Parse and filter an interaction (a line) defined by the tab25 format of the PSIQUIC IntAct REST API database.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array of all the pair of interactions of the query Gene.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://psicquic.github.io/MITAB25Format.html" target="_parent" title="https://psicquic.github.io/MITAB25Format.html">https://psicquic.github.io/MITAB25Format.html</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionPArser.rb', line 70</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_interaction'>create_interaction</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span>
	<span class='comment'># Assign a variable to each feature of the Tab25 format (separated by \t)
</span>	<span class='id identifier rubyid_id_a'>id_a</span><span class='comma'>,</span> <span class='id identifier rubyid_id_b'>id_b</span><span class='comma'>,</span> <span class='id identifier rubyid_alt_id_a'>alt_id_a</span><span class='comma'>,</span> <span class='id identifier rubyid_alt_id_b'>alt_id_b</span><span class='comma'>,</span> <span class='id identifier rubyid_al_a'>al_a</span><span class='comma'>,</span> <span class='id identifier rubyid_al_b'>al_b</span><span class='comma'>,</span> <span class='id identifier rubyid_int_met'>int_met</span><span class='comma'>,</span> <span class='id identifier rubyid_fist_a'>fist_a</span><span class='comma'>,</span> <span class='id identifier rubyid_id_pub'>id_pub</span><span class='comma'>,</span> <span class='id identifier rubyid_tax_a'>tax_a</span><span class='comma'>,</span> <span class='id identifier rubyid_tax_b'>tax_b</span><span class='comma'>,</span> <span class='id identifier rubyid_int_type'>int_type</span><span class='comma'>,</span> <span class='id identifier rubyid_source_db'>source_db</span><span class='comma'>,</span> <span class='id identifier rubyid_int_id'>int_id</span><span class='comma'>,</span> <span class='id identifier rubyid_int_score'>int_score</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
	<span class='comment'># The regex expression to extract the value of each feature, case insensitive
</span>	<span class='id identifier rubyid_line_regex'>line_regex</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\S*?:(.*?)(?:\(.*?\)|\||$)</span><span class='regexp_end'>/i</span></span> 
	<span class='comment'># The regex expression to extract the AGI Locus Code, case insensitive
</span>	<span class='id identifier rubyid_locus_tag_regex'>locus_tag_regex</span> <span class='op'>=</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>A[Tt]\d[Gg]\d\d\d\d\d</span><span class='regexp_end'>/i</span></span>
	<span class='id identifier rubyid_id_a'>id_a</span> <span class='op'>=</span> <span class='id identifier rubyid_id_a'>id_a</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='comment'># Search for ID of interactor A (IMPORTANT)
</span>	<span class='id identifier rubyid_id_b'>id_b</span> <span class='op'>=</span> <span class='id identifier rubyid_id_b'>id_b</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='comment'># Search for ID of interactor B (IMPORTANT)
</span>	<span class='id identifier rubyid_alt_id_a'>alt_id_a</span> <span class='op'>=</span> <span class='id identifier rubyid_alt_id_a'>alt_id_a</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Search for alternative ID of interactor A (IMPORTANT)
</span>	<span class='id identifier rubyid_alt_id_b'>alt_id_b</span> <span class='op'>=</span> <span class='id identifier rubyid_alt_id_b'>alt_id_b</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Search for alternative ID of interactor B (IMPORTANT)
</span>	<span class='id identifier rubyid_al_a'>al_a</span> <span class='op'>=</span> <span class='id identifier rubyid_al_a'>al_a</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Search for alias of interactor A (IMPORTANT)
</span>	<span class='id identifier rubyid_al_b'>al_b</span> <span class='op'>=</span> <span class='id identifier rubyid_al_b'>al_b</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Search for alias of interactor B (IMPORTANT)
</span>	<span class='id identifier rubyid_int_met'>int_met</span> <span class='op'>=</span> <span class='id identifier rubyid_int_met'>int_met</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Search for interaction detection method, Could be used as filtered by PI request. In this case we do not filter
</span>	<span class='id identifier rubyid_tax_a'>tax_a</span> <span class='op'>=</span> <span class='id identifier rubyid_tax_a'>tax_a</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Search for the Taxonomy ID of interactor A (FILTER)
</span>	<span class='id identifier rubyid_tax_b'>tax_b</span> <span class='op'>=</span> <span class='id identifier rubyid_tax_b'>tax_b</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Search for the Taxonomy ID of interactor B (FILTER)
</span>	<span class='id identifier rubyid_int_type'>int_type</span> <span class='op'>=</span> <span class='id identifier rubyid_int_type'>int_type</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Search for interactor type
</span>	<span class='id identifier rubyid_source_db'>source_db</span> <span class='op'>=</span> <span class='id identifier rubyid_source_db'>source_db</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Search for source Database
</span>	<span class='id identifier rubyid_int_id'>int_id</span> <span class='op'>=</span> <span class='id identifier rubyid_int_id'>int_id</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Search for interaction ID
</span>	<span class='id identifier rubyid_int_score'>int_score</span> <span class='op'>=</span> <span class='id identifier rubyid_int_score'>int_score</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='id identifier rubyid_line_regex'>line_regex</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># Search for interaction score (FILTER)
</span>
	<span class='comment'># FILTERS
</span>
	<span class='comment'># Taxonomy filter. Ara TaxID: 3702
</span>	<span class='id identifier rubyid_ara_tax'>ara_tax</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>3702</span><span class='tstring_end'>&quot;</span></span>
	<span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_tax_a'>tax_a</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_ara_tax'>ara_tax</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='lparen'>(</span><span class='id identifier rubyid_tax_b'>tax_b</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_ara_tax'>ara_tax</span><span class='rparen'>)</span> <span class='comment'># Both interactors must be of Arabidopsis.
</span>
	<span class='comment'># Quality filter: Threshold of 0.4
</span>	<span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_int_score'>int_score</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>&gt;=</span> <span class='float'>0.4</span>

	<span class='comment'>## FIND LOCUS TAG IN ALL ID&#39;s (IT WILL BE UNIQUE ID FOR EACH GENE)
</span>	<span class='comment'># Since I don&#39;t know a priori where is the AGI Locus Code, I search for all possible ID&#39;s
</span>	<span class='comment'># That includes the ID, the alternative ID&#39;s and the alias.
</span>
	<span class='comment'># For protein A
</span>	<span class='kw'>if</span> <span class='id identifier rubyid_id_a'>id_a</span> <span class='kw'>and</span> <span class='id identifier rubyid_alt_id_a'>alt_id_a</span> <span class='kw'>and</span> <span class='id identifier rubyid_al_a'>al_a</span>
		<span class='comment'># Join all possible ID&#39;s
</span>		<span class='id identifier rubyid_all_ids_a'>all_ids_a</span> <span class='op'>=</span> <span class='id identifier rubyid_id_a'>id_a</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_alt_id_a'>alt_id_a</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>  <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_al_a'>al_a</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> 
		<span class='comment'># Search for AGI Locus ID
</span>		<span class='id identifier rubyid_locus_tag_a'>locus_tag_a</span> <span class='op'>=</span> <span class='id identifier rubyid_all_ids_a'>all_ids_a</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_locus_tag_regex'>locus_tag_regex</span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='comment'># For protein B
</span>	<span class='kw'>if</span> <span class='id identifier rubyid_id_b'>id_b</span> <span class='kw'>and</span> <span class='id identifier rubyid_alt_id_b'>alt_id_b</span> <span class='kw'>and</span> <span class='id identifier rubyid_al_b'>al_b</span>
		<span class='comment'># Join all possible ID&#39;s
</span>		<span class='id identifier rubyid_all_ids_b'>all_ids_b</span> <span class='op'>=</span> <span class='id identifier rubyid_id_b'>id_b</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_alt_id_b'>alt_id_b</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>  <span class='id identifier rubyid_al_b'>al_b</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
		<span class='comment'># Search for AGI Locus ID
</span>		<span class='id identifier rubyid_locus_tag_b'>locus_tag_b</span> <span class='op'>=</span> <span class='id identifier rubyid_all_ids_b'>all_ids_b</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_locus_tag_regex'>locus_tag_regex</span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='comment'># IMPORTANT STEP
</span>	<span class='comment'># The interaction is only valid if there is an AGI Locus ID defined for both interactors!!!
</span>
	<span class='kw'>unless</span> <span class='id identifier rubyid_locus_tag_a'>locus_tag_a</span> 
		<span class='kw'>return</span> <span class='kw'>nil</span> <span class='comment'># Return nil if no AGI Locus ID for interactor A
</span>	<span class='kw'>end</span>

	<span class='kw'>unless</span> <span class='id identifier rubyid_locus_tag_b'>locus_tag_b</span>
		<span class='kw'>return</span> <span class='kw'>nil</span> <span class='comment'># Return nil if no AGI Locus ID for interactor B
</span>	<span class='kw'>end</span>

	<span class='comment'># Check if protein A and protein B are the same
</span>	<span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_locus_tag_a'>locus_tag_a</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span> <span class='op'>==</span> <span class='id identifier rubyid_locus_tag_b'>locus_tag_b</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>

	<span class='comment'># Return both AGI Locus ID of interactor A and B
</span>	<span class='kw'>return</span> <span class='id identifier rubyid_locus_tag_a'>locus_tag_a</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='comma'>,</span> <span class='id identifier rubyid_locus_tag_b'>locus_tag_b</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_interactions-instance_method">
  
    #<strong>create_interactions</strong>  &#x21d2; <tt>Array&lt;String&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Read the information of the PSIQUIC IntAct REST API with the Locus ID as query in tab25 format and create the list of interactions.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array of all the pair of interactions of the query Gene.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://psicquic.github.io/MITAB25Format.html" target="_parent" title="https://psicquic.github.io/MITAB25Format.html">https://psicquic.github.io/MITAB25Format.html</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionPArser.rb', line 34</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_interactions'>create_interactions</span>
	<span class='comment'># Array of all interactions in file
</span>	<span class='id identifier rubyid_interactions'>interactions</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
	<span class='comment'># The PSIQUIC IntAct URL of the query gene in tab25 format.
</span>	<span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://www.ebi.ac.uk/Tools/webservices/psicquic/intact/webservices/current/search/interactor/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@locus_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>?format=tab25</span><span class='tstring_end'>&quot;</span></span>
	<span class='comment'># Check if there is a response
</span>	<span class='kw'>if</span> <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_fetch'><span class='object_link'><a href="top-level-namespace.html#fetch-instance_method" title="#fetch (method)">fetch</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_raw_data'>raw_data</span> <span class='op'>=</span> <span class='id identifier rubyid_res'>res</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span> <span class='comment'># Get the body of the response
</span>		<span class='comment'># ASSUMPTION: If the result is empty, that gene does not interact with anything
</span>		<span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_raw_data'>raw_data</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>==</span> <span class='int'>0</span>
		<span class='comment'># Split the data by line
</span>		<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_raw_data'>raw_data</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
		<span class='comment'># Each line is an interaction
</span>		<span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
			<span class='id identifier rubyid_interaction'>interaction</span> <span class='op'>=</span> <span class='id identifier rubyid_create_interaction'>create_interaction</span><span class='lparen'>(</span><span class='id identifier rubyid_line'>line</span><span class='rparen'>)</span> <span class='comment'># Parse the interaction
</span>			<span class='comment'># Check if nil or not. It may be the case that all interactions does not pass the filters.
</span>			<span class='comment'># In that case, it is discarded.
</span>			<span class='kw'>if</span> <span class='id identifier rubyid_interaction'>interaction</span>
				<span class='id identifier rubyid_interactions'>interactions</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_interaction'>interaction</span> <span class='comment'># Assign the interaction (GeneID_A, GeneID_B) to the array of interactions
</span>			<span class='kw'>end</span>
		<span class='kw'>end</span>
	<span class='kw'>end</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_interactions'>interactions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="interactions-instance_method">
  
    #<strong>interactions</strong>  &#x21d2; <tt>Array&lt;String&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get method for the interactions array</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>. The binary interactions.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'InteractionPArser.rb', line 62</span>

<span class='kw'>def</span> <span class='id identifier rubyid_interactions'>interactions</span>
	<span class='kw'>return</span> <span class='ivar'>@interactions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Nov  8 12:59:24 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-3.0.2).
</div>

    </div>
  </body>
</html>